<!-- Booking Section -->
<section class="booking-section py-5 d-none ">
  <div class="container">
    <div class="row  align-items-start">
      <!-- LEFT: Schedule + Ticket Summary -->
      <div div class="col-12 col-lg-4 order-2 order-lg-1">
        <!-- Schedule Section (Integrated) -->
        <div>
          <h3 class="mb-4" style="text-align: center">Select Date</h3>
          <div class="date-strip mb-4 p-0 d-flex gap-3 justify-content-center flex-wrap flex-lg-nowrap" id="date-strip">
            <!-- Dates will be generated by JS -->
          </div>
          <div class="time-select my-3">
            <h3 class="mb-4" style="text-align: center">Time Showing:</h3>
            <input type="text" id="showtime" class="form-control text-center" readonly value="Select a cinema">
            <small class="text-muted d-block mt-2 text-center">Time changes based on selected cinema</small>
          </div>
        </div>

        <!-- Ticket Summary Panel -->
        <div class="ticketing bg-body-tertiary rounded-4 p-4 shadow sticky-lg-top">
          <h2 class="h4 mb-4">Selected Seats:</h2>
          <div class="ticket-info">
            <p>Number of Seats: <span id="seat-count">0</span></p>
            <p id="selected-seats">None</p>
            <h3 class="h5 mt-4">Movie Tickets</h3>
            <p>
              Date and Time: <span id="selected-date-time">Not selected</span>
            </p>
            <h6>Cinema Room: <span id="cinema-number">1</span></h6>
          </div>
          <!-- New Panel -->
          <div class="ticket-panel mt-4 pt-3 border-top">
            <p class="mb-3">
              <strong>Tickets:</strong> <span id="seat-quantity-panel">0</span>
            </p>
            <p class="h5 mb-4">
              <strong>Total Price:</strong> â‚±<span id="total-cost-panel"
                >0</span
              >
            </p>
            <div id="PaymentBtn" class="d-flex gap-2">
            <button id="ProceedBtn" class="btn btn-primary flex-grow-1" disabled>
              Proceed to Payment
            </button>


          <button id="CancelBtn" class="btn btn-outline-secondary flex-grow-1 nav-link border border-dark" 
                  data-page="now">
            Cancel
          </button>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-8 order-1 order-lg-2">
        <div class="seating text-center">
          <!-- Legend stays outside carousel -->
           <h4 class="mb-4">Choose Your Seats</h4>
          <div
            class="legend d-flex flex-wrap justify-content-center gap-4 mb-4">
            <div class="d-flex align-items-center">
              <span class="legend-seat p-3 rounded vacant me-2"></span> Vacant
            </div>
            <div class="d-flex align-items-center">
              <span class="legend-seat p-3 rounded occupied me-2"></span>
              Occupied
            </div>
            <div class="d-flex align-items-center">
              <span class="legend-seat p-3 rounded selected me-2"></span>
              Selected
            </div>
          </div>

          <!-- Loading Spinner -->
          <div id="seatsLoadingSpinner" class="text-center py-5" style="min-height: 400px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
            <div class="spinner-border text-primary mb-3" role="status" style="width: 3.5rem; height: 3.5rem; border-width: 0.3rem;">
              <span class="visually-hidden">Loading...</span>
            </div>
            <h5 class="text-primary mb-2">Loading Available Seats</h5>
            <p class="text-muted small">Please wait while we check seat availability...</p>
          </div>

          <!-- Cinema Carousel (hidden until seats are loaded) -->
          <div id="cinemaCarousel" class="carousel slide mb-3 d-none" data-bs-ride="false">
            <div class="carousel-inner">
              <!-- Cinema 1 -->
              <div class="carousel-item active">
                <h2 class="mb-4">Cinema 1</h2>
                <div class="screen mb-4 position-relative text-white  fw-bold mx-auto">SCREEN</div>

                <!-- Scrollable wrapper for seats -->
                <div class="seat-layout-wrapper ">
                  <div class="seat-layout">
                    {% set letters = ["A","B","C","D","E","F","G","H"] %} 
                    {% for row in range(8) %}
                    <div class="seat-row d-flex justify-content-center gap-4 mb-2 g-2">
                      <!-- Left side seats -->
                      <div class="col-auto d-flex gap-2">
                        {% for col in range(1,3) %}
                        <button class="btn seat vacant fw-bold  fs-6" data-cinema="1">
                          {{ letters[row] }}{{ col }}
                        </button>
                        {% endfor %}
                      </div>
                      <!-- Middle seats -->
                      <div class="col-auto d-flex gap-2">
                        {% for col in range(3,7) %}
                        <button class="btn seat vacant fw-bold  fs-6" data-cinema="1">
                          {{ letters[row] }}{{ col }}
                        </button>
                        {% endfor %}
                      </div>
                      <!-- Right side seats -->
                      <div class="col-auto d-flex gap-2">
                        {% for col in range(7,9) %}
                        <button class="btn seat vacant fw-bold  fs-6" data-cinema="1">
                          {{ letters[row] }}{{ col }}
                        </button>
                        {% endfor %}
                      </div>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>

              <!-- Cinema 2 -->
              <div class="carousel-item">
                <h2 class="mb-4">Cinema 2</h2>
                <div class="screen mb-4 position-relative text-white fw-bold  mx-auto">SCREEN</div>

                <!-- Scrollable wrapper for seats -->
                <div class="seat-layout-wrapper ">
                  <div class="seat-layout">
                    {% set letters = ["A","B","C","D","E","F","G","H"] %} 
                    {% for row in range(8) %}
                    <div class="seat-row d-flex justify-content-center gap-4 mb-2 g-2">
                      <!-- Left side seats -->
                      <div class="col-auto d-flex gap-2">
                        {% for col in range(1,3) %}
                        <button class="btn seat vacant fw-bold  fs-6" data-cinema="2">
                          {{ letters[row] }}{{ col }}
                        </button>
                        {% endfor %}
                      </div>
                      <!-- Middle seats -->
                      <div class="col-auto d-flex gap-2">
                        {% for col in range(3,7) %}
                        <button class="btn seat vacant fw-bold  fs-6" data-cinema="2">
                          {{ letters[row] }}{{ col }}
                        </button>
                        {% endfor %}
                      </div>
                      <!-- Right side seats -->
                      <div class="col-auto d-flex gap-2">
                        {% for col in range(7,9) %}
                        <button class="btn seat vacant fw-bold  fs-6" data-cinema="2">
                          {{ letters[row] }}{{ col }}
                        </button>
                        {% endfor %}
                      </div>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>

            <!-- Carousel Controls -->
           <button class="carousel-control-prev" type="button" data-bs-target="#cinemaCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon p-4 rounded-circle bg-dark bg-opacity-75" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#cinemaCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon p-4 rounded-circle bg-dark bg-opacity-75" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
          <!-- End Cinema Carousel -->
        </div>
      </div>
      
    </div>
  </div>
</section>