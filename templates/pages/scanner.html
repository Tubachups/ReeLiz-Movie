<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReeLiz - Ticket Scanner</title>
  <script src="https://kit.fontawesome.com/88f05daeb4.js" crossorigin="anonymous"></script>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;700&family=Fjalla+One&display=swap"
    rel="stylesheet">
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/scanner.css') }}">
</head>

<body class="scanner-body">
  <!-- Logout Button (X on upper right) -->
  <a href="{{ url_for('scanner_logout') }}" class="logout-btn" title="Logout">
    <i class="fa-solid fa-xmark"></i>
  </a>

  <!-- Main Scanner Container -->
  <div class="scanner-container">
    
    <!-- Welcome State (Default) -->
    <div id="welcomeState" class="scanner-state active">
      <div class="welcome-content">
        <div class="logo-container">
          <h1 class="logo-text">WELCOME TO</h1>
          <h1 class="reeliz-text">REELIZ</h1>
          <p class="welcome-subtitle">Scan your ticket to get in your room</p>
        </div>
        <div class="scanner-animation">
          <div class="barcode-icon">
            <i class="fa-solid fa-barcode"></i>
          </div>
          <div class="scan-line"></div>
        </div>
        <div class="waiting-text" id="waitingText">
          <i class="fa-solid fa-spinner fa-spin me-2"></i>
          Waiting for barcode scan...
        </div>
      </div>
    </div>

    <!-- Processing State -->
    <div id="processingState" class="scanner-state">
      <div class="processing-content">
        <div class="processing-icon">
          <i class="fa-solid fa-spinner fa-spin"></i>
        </div>
        <h2 class="processing-title">Processing...</h2>
        <p class="processing-subtitle">Validating your ticket</p>
        <div class="processing-barcode" id="processingBarcode">-</div>
      </div>
    </div>

    <!-- Success State -->
    <div id="successState" class="scanner-state">
      <div class="success-content">
        <div class="success-icon">
          <i class="fa-solid fa-circle-check"></i>
        </div>
        <h2 class="success-title">Access Granted!</h2>
        <p class="success-subtitle">Welcome to your cinema room</p>
        
        <!-- Door Status / Ticket Counter (Centered at top) -->
        <div class="door-status">
          <i class="fa-solid fa-door-open me-2"></i>
          Door is now open - Please proceed
        </div>
        
        <!-- Ticket Info -->
        <div class="ticket-info-card">
          <div class="ticket-header">
            <i class="fa-solid fa-ticket me-2"></i>
            Ticket Information
          </div>
          <div class="ticket-details">
            <div class="ticket-row">
              <span class="ticket-label"><i class="fa-solid fa-user me-2"></i>Name</span>
              <span class="ticket-value" id="ticketName">-</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label"><i class="fa-solid fa-barcode me-2"></i>Barcode</span>
              <span class="ticket-value" id="ticketBarcode">-</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label"><i class="fa-solid fa-door-open me-2"></i>Cinema Room</span>
              <span class="ticket-value" id="ticketRoom">-</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label"><i class="fa-solid fa-film me-2"></i>Movie</span>
              <span class="ticket-value" id="ticketMovie">-</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label"><i class="fa-solid fa-chair me-2"></i>Seats</span>
              <span class="ticket-value" id="ticketSeats">-</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label"><i class="fa-solid fa-calendar me-2"></i>Date</span>
              <span class="ticket-value" id="ticketDate">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Error State -->
    <div id="errorState" class="scanner-state">
      <div class="error-content">
        <div class="error-icon">
          <i class="fa-solid fa-circle-xmark"></i>
        </div>
        <h2 class="error-title" id="errorTitle">Access Denied</h2>
        <p class="error-message" id="errorMessage">An error occurred</p>
        
        <div class="error-details" id="errorDetails">
          <!-- Dynamic error details will be inserted here -->
        </div>
        
        <div class="assistance-message">
          <i class="fa-solid fa-headset me-2"></i>
          Please approach the staff for assistance
        </div>
      </div>
    </div>

  </div>

  <!-- Hidden input to capture barcode scanner input -->
  <input type="text" id="barcodeInput" class="barcode-input" autocomplete="off" autofocus>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
    integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
    crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='js/services/scanner.js') }}"></script>
</body>

</html>
